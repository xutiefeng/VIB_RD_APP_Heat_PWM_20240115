/****************************************Copyright (c)****************************************************
**                            Guangzhou ZHIYUAN electronics Co.,LTD.
**
**                                 http://www.zlgmcu.com
**
**--------------File Info---------------------------------------------------------------------------------
** File name:           CAN.h
** Last modified Date:  2012-06-01
** Last Version:        V1.00
** Descriptions:        
**
**--------------------------------------------------------------------------------------------------------
** Created by:          zhaohai
** Created date:        2012-06-01
** Version:             V1.00
** Descriptions:        
**
**--------------------------------------------------------------------------------------------------------
** Modified by:
** Modified date:
** Version:
** Descriptions:
**
** Rechecked by:
*********************************************************************************************************/
#ifndef __CAN_H
#define __CAN_H

#include "includeall.h"

#ifdef __cplusplus
extern  "C" {
#endif                                                                  /*  __cplusplus                 */

/*********************************************************************************************************
** 宏定义
*********************************************************************************************************/
#define CAN_HwIsDisabled()              (CAN0->MCR & ((INT32U)1 << 31))
#define CAN_HwTxFlagIsTrue(n)           (CAN0->IFLAG1 & (1 << n))
#define CAN_HwRxFlagIsTrue(n)           (CAN0->IFLAG1 & (1 << n))
#define CAN_HwAbortIsTrue(n)            FALSE   //(CAN0->MCR & (1 << 12)) // 待查
#define CAN_HwAbortSet(n)               NOP()   //(CAN0->MCR |= (1 << 12))// 待查
#define CAN_HwCancelIsTrue(n)           FALSE   //(CAN0->MCR & (1 << x))  // 待查

/*********************************************************************************************************
** 全局定量
*********************************************************************************************************/

/*********************************************************************************************************
** 全局变量
*********************************************************************************************************/

/*********************************************************************************************************
** 函数声明
*********************************************************************************************************/
/******************************************* Public  Function *******************************************/
extern  void    CAN_Init(void);
#if CAN_HWTX_MODE == CAN_HWTX_MODE_FIXED
extern  BOOLEAN CAN_SenMsg(volatile CanMsgStruct *pMsg, INT8U ucHwTxNum);
#elif   CAN_HWTX_MODE == CAN_HWTX_MODE_RANDOM
extern  INT8U   CAN_SenMsg(volatile CanMsgStruct *pMsg);
#elif   CAN_HWTX_MODE == CAN_HWTX_MODE_WAIT
extern  BOOLEAN CAN_SenMsg(volatile CanMsgStruct *pMsg);
#endif
extern  void    CAN_RcvMsg(volatile CanMbStruct *pMbInfo);

/******************************************* Private Function *******************************************/

/*********************************************************************************************************
**
*********************************************************************************************************/
#ifdef __cplusplus
}
#endif                                                                  /*  __cplusplus                 */

#endif                                                                  /*  __CAN_H                     */
/*********************************************************************************************************
** END FILE
*********************************************************************************************************/
